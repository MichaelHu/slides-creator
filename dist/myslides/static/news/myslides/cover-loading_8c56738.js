define(["require","zepto","canvas"],function(e,n,t){function o(){var e=window.navigator.userAgent,n=e.match(/Android (\d+)\.(\d+)/),t=30;return n&&n.length&&(t=n[1]+""+n[2]-0),23>=t}function i(e){if(f.clearRect(0,0,f.getWidth(),f.getHeight()).save().beginPath().arc(e.x,e.y,e.radius,e.sAngle,e.eAngle,!0).strokeStyle(e.color).lineWidth(e.lineWidth).stroke().restore(),o())d.hide(),l.show();else{var n=f.canvas.toDataURL("image/png");n&&d.attr("src",n).off().on("load",function(){d.off("load").show()}).on("error",function(){d.off("error")
})}}function r(e){var n={x:30*a,y:30*a,radius:27*a,sAngle:1.5*c,eAngle:(100-e)/100*2*c-c/2,color:"#f00",lineWidth:6};i(n),g.html(e)}var a=window.devicePixelRatio||1,c=Math.PI,l=n("#cover-loading canvas"),d=n("#cover-loading img"),g=n("#cover-loading .percent"),s=60*a,h=s,f=new t(l);return f.width(s).height(h).textAlign("center").textBaseline("top"),r});